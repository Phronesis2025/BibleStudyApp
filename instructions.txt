# Bible Study App Design Specification

## Dark Mode Design
- Background: Dark gradient from gray-900 to blue-900
- Text: White and gray-400 for secondary text
- Accents: Sky-400 for interactive elements
- Cards: Semi-transparent dark backgrounds with subtle borders
- Hover states: Subtle lightening of backgrounds
- Focus states: Sky-400 outline
- Loading states: Sky-400 spinners
- Error states: Red-400 text
- Success states: Green-400 text

## Layout Structure
- Header: Fixed position with dark background
- Main content: Centered with max-width-7xl
- Sidebar: Fixed position on desktop, bottom on mobile
- Cards: Consistent padding and border radius
- Forms: Dark backgrounds with light text
- Buttons: Sky-400 with hover states
- Links: Sky-400 with underline on hover

## API Routes

### `/api/verse`
- **Purpose:** Fetch Bible verses from ESV API.
- **Request:** POST with body containing `verse` (string).
- **Response:** JSON object with keys: `passages` (array of verse texts), `query` (original query).

### `/api/commentary`
- **Purpose:** Generate AI commentary on Bible verses.
- **Request:** POST with body containing `verse` (string), `verseText` (string).
- **Response:** JSON object with keys: `commentary` (string), `themes` (array of theme strings).
- **Theme Restriction:** "themes": 2-3 key themes derived from the "Reading it Right" analysis. Only return themes from the following list: faith, love, hope, grace, mercy, peace, wisdom, truth, salvation, righteousness, joy, forgiveness, obedience, humility, trust, prayer, service, holiness, redemption, eternity.

### `/api/share`
- **Purpose:** Share a reflection with the community.
- **Request:** POST with body containing userId, verse, verseText, question, answer, insight (optional), shared (boolean).
- **Response:** JSON object with keys: `success` (boolean), `reflectionId` (string).

### `/api/reflections`
- **Purpose:** Fetch community reflections.
- **Request:** GET with optional query parameters: `theme` (string), `sort` (string, "recent" or "popular").
- **Response:** JSON array of reflection objects, each with keys: userId, verse, verseText, question, answer, insight, themes, likes (number), likedBy (array of user IDs).

### `/api/like`
- **Purpose:** Like or unlike a reflection.
- **Request:** POST with body containing userId, reflectionId, like (boolean, true to like, false to unlike).
- **Response:** JSON object with keys: success (boolean), likes (updated number of likes).

## Database Schema

### `reflections` table
- `id` (uuid, primary key)
- `user_id` (uuid, foreign key)
- `verse` (text)
- `verse_text` (text)
- `question` (text)
- `answer` (text)
- `insight` (text)
- `themes` (text[])
- `likes` (integer, default 0)
- `liked_by` (uuid[])
- `created_at` (timestamp)
- `updated_at` (timestamp)

### `reflection_likes` table
- `id` (uuid, primary key)
- `reflection_id` (uuid, foreign key)
- `user_id` (uuid, foreign key)
- `liked` (boolean)
- `created_at` (timestamp)
- `updated_at` (timestamp)

## Theme Configuration
Each theme has:
- Background color (with 20% opacity)
- Text color
- Icon name

Themes:
1. faith: blue-400
2. love: red-400
3. hope: yellow-400
4. grace: purple-400
5. mercy: pink-400
6. peace: green-400
7. wisdom: indigo-400
8. truth: teal-400
9. salvation: orange-400
10. righteousness: amber-400
11. joy: yellow-300
12. forgiveness: pink-300
13. obedience: blue-300
14. humility: indigo-300
15. trust: teal-300
16. prayer: purple-300
17. service: green-300
18. holiness: amber-300
19. redemption: orange-300
20. eternity: cyan-300 